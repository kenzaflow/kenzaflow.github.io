import{r as N}from"./index-iJOU9LjR.js";const H=new Set,f=new WeakMap,M=new WeakMap,b=new WeakMap,B=new WeakMap,Q=new WeakMap,T=new WeakMap,S=new WeakMap,x=new WeakSet;let g,z=0,$=0;const p="__aa_tgt",C="__aa_del",P="__aa_new",U=e=>{const t=ee(e);t&&t.forEach(o=>te(o))},G=e=>{e.forEach(t=>{t.target===g&&J(),f.has(t.target)&&y(t.target)})};function V(e){const t=B.get(e);t==null||t.disconnect();let o=f.get(e),n=0;const i=5;o||(o=O(e),f.set(e,o));const{offsetWidth:r,offsetHeight:s}=g,d=[o.top-i,r-(o.left+i+o.width),s-(o.top+i+o.height),o.left-i].map(c=>`${-1*Math.floor(c)}px`).join(" "),l=new IntersectionObserver(()=>{++n>1&&y(e)},{root:g,threshold:1,rootMargin:d});l.observe(e),B.set(e,l)}function y(e){clearTimeout(S.get(e));const t=A(e),o=W(t)?500:t.duration;S.set(e,setTimeout(async()=>{const n=b.get(e);try{await(n==null?void 0:n.finished),f.set(e,O(e)),V(e)}catch{}},o))}function J(){clearTimeout(S.get(g)),S.set(g,setTimeout(()=>{H.forEach(e=>q(e,t=>D(()=>y(t))))},100))}function K(e){setTimeout(()=>{Q.set(e,setInterval(()=>D(y.bind(null,e)),2e3))},Math.round(2e3*Math.random()))}function D(e){typeof requestIdleCallback=="function"?requestIdleCallback(()=>e()):requestAnimationFrame(()=>e())}let _,E;const Z=typeof window<"u"&&"ResizeObserver"in window;Z&&(g=document.documentElement,_=new MutationObserver(U),E=new ResizeObserver(G),window.addEventListener("scroll",()=>{$=window.scrollY,z=window.scrollX}),E.observe(g));function ee(e){return e.reduce((n,i)=>[...n,...Array.from(i.addedNodes),...Array.from(i.removedNodes)],[]).every(n=>n.nodeName==="#comment")?!1:e.reduce((n,i)=>{if(n===!1)return!1;if(i.target instanceof Element){if(k(i.target),!n.has(i.target)){n.add(i.target);for(let r=0;r<i.target.children.length;r++){const s=i.target.children.item(r);if(s){if(C in s)return!1;k(i.target,s),n.add(s)}}}if(i.removedNodes.length)for(let r=0;r<i.removedNodes.length;r++){const s=i.removedNodes[r];if(C in s)return!1;s instanceof Element&&(n.add(s),k(i.target,s),M.set(s,[i.previousSibling,i.nextSibling]))}}return n},new Set)}function k(e,t){!t&&!(p in e)?Object.defineProperty(e,p,{value:e}):t&&!(p in t)&&Object.defineProperty(t,p,{value:e})}function te(e){var t;const o=e.isConnected,n=f.has(e);o&&M.has(e)&&M.delete(e),b.has(e)&&((t=b.get(e))===null||t===void 0||t.cancel()),P in e?Y(e):n&&o?oe(e):n&&!o?ie(e):Y(e)}function h(e){return Number(e.replace(/[^0-9.\-]/g,""))}function ne(e){let t=e.parentElement;for(;t;){if(t.scrollLeft||t.scrollTop)return{x:t.scrollLeft,y:t.scrollTop};t=t.parentElement}return{x:0,y:0}}function O(e){const t=e.getBoundingClientRect(),{x:o,y:n}=ne(e);return{top:t.top+n,left:t.left+o,width:t.width,height:t.height}}function F(e,t,o){let n=t.width,i=t.height,r=o.width,s=o.height;const a=getComputedStyle(e);if(a.getPropertyValue("box-sizing")==="content-box"){const l=h(a.paddingTop)+h(a.paddingBottom)+h(a.borderTopWidth)+h(a.borderBottomWidth),c=h(a.paddingLeft)+h(a.paddingRight)+h(a.borderRightWidth)+h(a.borderLeftWidth);n-=c,r-=c,i-=l,s-=l}return[n,r,i,s].map(Math.round)}function A(e){return p in e&&T.has(e[p])?T.get(e[p]):{duration:250,easing:"ease-in-out"}}function I(e){if(p in e)return e[p]}function j(e){const t=I(e);return t?x.has(t):!1}function q(e,...t){t.forEach(o=>o(e,T.has(e)));for(let o=0;o<e.children.length;o++){const n=e.children.item(o);n&&t.forEach(i=>i(n,T.has(n)))}}function X(e){return Array.isArray(e)?e:[e]}function W(e){return typeof e=="function"}function oe(e){const t=f.get(e),o=O(e);if(!j(e))return f.set(e,o);let n;if(!t)return;const i=A(e);if(typeof i!="function"){const r=t.left-o.left,s=t.top-o.top,[a,d,l,c]=F(e,t,o),m={transform:`translate(${r}px, ${s}px)`},u={transform:"translate(0, 0)"};a!==d&&(m.width=`${a}px`,u.width=`${d}px`),l!==c&&(m.height=`${l}px`,u.height=`${c}px`),n=e.animate([m,u],{duration:i.duration,easing:i.easing})}else{const[r]=X(i(e,"remain",t,o));n=new Animation(r),n.play()}b.set(e,n),f.set(e,o),n.addEventListener("finish",y.bind(null,e))}function Y(e){P in e&&delete e[P];const t=O(e);f.set(e,t);const o=A(e);if(!j(e))return;let n;if(typeof o!="function")n=e.animate([{transform:"scale(.98)",opacity:0},{transform:"scale(0.98)",opacity:0,offset:.5},{transform:"scale(1)",opacity:1}],{duration:o.duration*1.5,easing:"ease-in"});else{const[i]=X(o(e,"add",t));n=new Animation(i),n.play()}b.set(e,n),n.addEventListener("finish",y.bind(null,e))}function R(e,t){var o;e.remove(),f.delete(e),M.delete(e),b.delete(e),(o=B.get(e))===null||o===void 0||o.disconnect(),setTimeout(()=>{if(C in e&&delete e[C],Object.defineProperty(e,P,{value:!0,configurable:!0}),t&&e instanceof HTMLElement)for(const n in t)e.style[n]=""},0)}function ie(e){var t;if(!M.has(e)||!f.has(e))return;const[o,n]=M.get(e);Object.defineProperty(e,C,{value:!0,configurable:!0});const i=window.scrollX,r=window.scrollY;if(n&&n.parentNode&&n.parentNode instanceof Element?n.parentNode.insertBefore(e,n):o&&o.parentNode?o.parentNode.appendChild(e):(t=I(e))===null||t===void 0||t.appendChild(e),!j(e))return R(e);const[s,a,d,l]=re(e),c=A(e),m=f.get(e);(i!==z||r!==$)&&se(e,i,r,c);let u,w={position:"absolute",top:`${s}px`,left:`${a}px`,width:`${d}px`,height:`${l}px`,margin:"0",pointerEvents:"none",transformOrigin:"center",zIndex:"100"};if(!W(c))Object.assign(e.style,w),u=e.animate([{transform:"scale(1)",opacity:1},{transform:"scale(.98)",opacity:0}],{duration:c.duration,easing:"ease-out"});else{const[L,v]=X(c(e,"remove",m));(v==null?void 0:v.styleReset)!==!1&&(w=(v==null?void 0:v.styleReset)||w,Object.assign(e.style,w)),u=new Animation(L),u.play()}b.set(e,u),u.addEventListener("finish",R.bind(null,e,w))}function se(e,t,o,n){const i=z-t,r=$-o,s=document.documentElement.style.scrollBehavior;if(getComputedStyle(g).scrollBehavior==="smooth"&&(document.documentElement.style.scrollBehavior="auto"),window.scrollTo(window.scrollX+i,window.scrollY+r),!e.parentElement)return;const d=e.parentElement;let l=d.clientHeight,c=d.clientWidth;const m=performance.now();function u(){requestAnimationFrame(()=>{if(!W(n)){const w=l-d.clientHeight,L=c-d.clientWidth;m+n.duration>performance.now()?(window.scrollTo({left:window.scrollX-L,top:window.scrollY-w}),l=d.clientHeight,c=d.clientWidth,u()):document.documentElement.style.scrollBehavior=s}})}u()}function re(e){const t=f.get(e),[o,,n]=F(e,t,O(e));let i=e.parentElement;for(;i&&(getComputedStyle(i).position==="static"||i instanceof HTMLBodyElement);)i=i.parentElement;i||(i=document.body);const r=getComputedStyle(i),s=f.get(i)||O(i),a=Math.round(t.top-s.top)-h(r.borderTopWidth),d=Math.round(t.left-s.left)-h(r.borderLeftWidth);return[a,d,o,n]}function ae(e,t={}){return _&&E&&(window.matchMedia("(prefers-reduced-motion: reduce)").matches&&!W(t)&&!t.disrespectUserMotionPreference||(x.add(e),getComputedStyle(e).position==="static"&&Object.assign(e.style,{position:"relative"}),q(e,y,K,i=>E==null?void 0:E.observe(i)),W(t)?T.set(e,t):T.set(e,{duration:250,easing:"ease-in-out",...t}),_.observe(e,{childList:!0}),H.add(e))),Object.freeze({parent:e,enable:()=>{x.add(e)},disable:()=>{x.delete(e)},isEnabled:()=>x.has(e)})}function ce(e){const[t,o]=N.useState(),n=N.useMemo(()=>e,[]),i=N.useCallback(s=>{s instanceof HTMLElement?o(ae(s,n)):o(void 0)},[n]),r=N.useCallback(s=>{t&&(s?t.enable():t.disable())},[t]);return[i,r]}export{ce as u};
